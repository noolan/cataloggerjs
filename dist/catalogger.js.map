{"version":3,"sources":["../node_modules/js-levenshtein/index.js","utilities.js","regular-expressions.js","constants.js","catalogger.js"],"names":["module","exports","_min","d0","d1","d2","bx","ay","a","b","length","tmp","la","lb","charCodeAt","offset","x","y","d3","dd","dy","bx0","bx1","bx2","bx3","vector","push","len","clone","variable","JSON","parse","stringify","cloneEnumerable","v","e","console","error","getNestedValue","obj","keys","defaultValue","undefined","idProperty","intsAreIds","keySeparator","logErrors","split","Array","isArray","namedLogError","key","splice","int","parseInt","Number","isNaN","found","findByProperty","castToInt","logError","args","arg","name","group","groupEnd","valueToArray","value","blank","removeEmpty","separator","trimStrings","arr","Symbol","iterator","Object","values","String","i","trim","type","valueToString","glue","join","REGULAR_EXPRESSIONS","articlesAndDeterminers","multiSpace","multiWhitespace","punctuation","singleCharacters","singleCharactersWordBoundries","tabsAndVerticalWhitespace","whitespace","LENGTH","OCCURENCES","RELEVANCE","WEIGHT","BUILD_INDEX","GET_RESULTS","INVALIDATE_RESULTS","INVALIDATE_SORTING","NORMALIZE_STRING","UPDATE_RESULTS","CACHE","CONFIG","DATA","INDEX","RESULTS","QUERY","DEFAULT_CONFIG","relevance","inject","field","threshold","results","limit","sort","byRelevance","enabled","fields","string","replacements","exp","val","grouped","levenshtein","require","Catalogger","documents","options","stringNormalizations","Map","dictionary","create","valid","items","sorted","processed","raw","tokens","config","query","result","dict","rawText","includes","toLowerCase","normalizedText","tokenIndex","token","fieldLength","foundAt","Math","log","docWeight","docs","resultDocuments","set","entries","item","from","output","doc","clear","input","normalizedString","str","has","get","replacement","match","exec","substring","index","start","middle","end","replace","map","k","dictTokens","queryToken","dictToken","matchValue","min","distance","rel","collator","Intl","Collator","caseFirst","ignorePunctuation","localeMatcher","numeric","sensitivity","usage","docA","docB","comparison","compare","direction","toUpperCase","reIndex","rawFields","documentFields","same","rawQuery","Set","catalog","using"],"mappings":"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","file":"catalogger.js","sourceRoot":"../src","sourcesContent":["'use strict';\nmodule.exports = (function()\n{\n  function _min(d0, d1, d2, bx, ay)\n  {\n    return d0 < d1 || d2 < d1\n        ? d0 > d2\n            ? d2 + 1\n            : d0 + 1\n        : bx === ay\n            ? d1\n            : d1 + 1;\n  }\n\n  return function(a, b)\n  {\n    if (a === b) {\n      return 0;\n    }\n\n    if (a.length > b.length) {\n      var tmp = a;\n      a = b;\n      b = tmp;\n    }\n\n    var la = a.length;\n    var lb = b.length;\n\n    while (la > 0 && (a.charCodeAt(la - 1) === b.charCodeAt(lb - 1))) {\n      la--;\n      lb--;\n    }\n\n    var offset = 0;\n\n    while (offset < la && (a.charCodeAt(offset) === b.charCodeAt(offset))) {\n      offset++;\n    }\n\n    la -= offset;\n    lb -= offset;\n\n    if (la === 0 || lb < 3) {\n      return lb;\n    }\n\n    var x = 0;\n    var y;\n    var d0;\n    var d1;\n    var d2;\n    var d3;\n    var dd;\n    var dy;\n    var ay;\n    var bx0;\n    var bx1;\n    var bx2;\n    var bx3;\n\n    var vector = [];\n\n    for (y = 0; y < la; y++) {\n      vector.push(y + 1);\n      vector.push(a.charCodeAt(offset + y));\n    }\n\n    var len = vector.length - 1;\n\n    for (; x < lb - 3;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      bx1 = b.charCodeAt(offset + (d1 = x + 1));\n      bx2 = b.charCodeAt(offset + (d2 = x + 2));\n      bx3 = b.charCodeAt(offset + (d3 = x + 3));\n      dd = (x += 4);\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        ay = vector[y + 1];\n        d0 = _min(dy, d0, d1, bx0, ay);\n        d1 = _min(d0, d1, d2, bx1, ay);\n        d2 = _min(d1, d2, d3, bx2, ay);\n        dd = _min(d2, d3, dd, bx3, ay);\n        vector[y] = dd;\n        d3 = d2;\n        d2 = d1;\n        d1 = d0;\n        d0 = dy;\n      }\n    }\n\n    for (; x < lb;) {\n      bx0 = b.charCodeAt(offset + (d0 = x));\n      dd = ++x;\n      for (y = 0; y < len; y += 2) {\n        dy = vector[y];\n        vector[y] = dd = _min(dy, d0, dd, bx0, vector[y + 1]);\n        d0 = dy;\n      }\n    }\n\n    return dd;\n  };\n})();\n\n","const clone = function (variable) {\n  if (typeof variable === 'object') {\n    return JSON.parse(JSON.stringify(variable))\n  } else {\n    return variable\n  }\n}\n\nconst cloneEnumerable = function (v) {\n  try {\n    return typeof v === 'object' ? JSON.parse(JSON.stringify(v)) : v\n  } catch (e) {\n    console.error(e, v)\n    return v\n  }\n}\n\nconst getNestedValue = function (\n  obj,\n  keys = [],\n  {\n    defaultValue = undefined, idProperty = 'id', intsAreIds = true, keySeparator = '/', logErrors = false\n  } = {\n    defaultValue: undefined, idProperty: 'id', intsAreIds: true, keySeparator: '/', logErrors: false\n  }\n) {\n  if (typeof keys === 'string') {\n    keys = keys.split(keySeparator)\n  }\n  if (!Array.isArray(keys)) {\n    if (logErrors) { namedLogError('Invalid keys parameter', {keys}) }\n    return defaultValue\n  }\n\n  if (keys.length) {\n    if (typeof obj !== 'object' || obj === null) {\n      if (logErrors) { namedLogError('Nested object not found at given key', {obj, keys}) }\n      return defaultValue\n    }\n    const key = keys.splice(0, 1)[0]\n    if (key === '') {\n      return getNestedValue(obj, keys, { defaultValue, idProperty, intsAreIds })\n    }\n    const int = parseInt(key, 10)\n    if (!Number.isNaN(int)) {\n      if (intsAreIds) {\n        const found = findByProperty(obj, idProperty, int, { castToInt: true })\n        if (typeof found !== 'undefined') {\n          return getNestedValue(found, keys, { defaultValue, idProperty, intsAreIds })\n        }\n      } else if (typeof obj[int] !== 'undefined') {\n        return getNestedValue(obj[int], keys, { defaultValue, idProperty, intsAreIds })\n      }\n    }\n    if (typeof obj[key] !== 'undefined') {\n      return getNestedValue(obj[key], keys, { defaultValue, idProperty, intsAreIds })\n    }\n    if (logErrors) { namedLogError('Nested object not found at given key', {obj, key}) }\n    return defaultValue\n  } else {\n    return obj\n  }\n}\n\nconst logError = function (...args) {\n  for (const arg of args) {\n    if (typeof arg === 'object') {\n      console.error(clone(arg))\n    } else {\n      console.error(arg)\n    }\n  }\n  return args\n}\n\nconst namedLogError = function (name, ...args) {\n  console.group(name)\n  logError(args)\n  console.groupEnd()\n}\n\nconst valueToArray = function (\n  value,\n  { \n    blank = [], removeEmpty = false, separator = undefined, trimStrings = false\n  } = {\n    blank: [], removeEmpty: false, separator: undefined, trimStrings: false\n  }\n) {\n  let arr = null\n  switch (typeof value) {\n    case 'object':\n      if (value === null) { return blank }\n      arr = [...(typeof value[Symbol.iterator] === 'function' ? value : Object.values(value))]\n      break\n    case 'undefined': return blank\n    case 'string':\n    default: value = String(value)\n      arr = value.split(separator)\n  }\n\n  if (trimStrings) {\n    for (let i=0; i<arr.length; i++) {\n      if (typeof arr[i] === 'string') {\n        arr[i] = arr[i].trim()\n      }\n    }\n  }\n\n  if (removeEmpty) {\n    for (let i=0; i<arr.length; i++) {\n      const type = typeof arr[i]\n      if (\n        (type === 'string' && arr[i].trim() === '') ||\n        arr[i] === null || type === 'undefined'\n      ) {\n        arr.splice(i--, 1)\n      }\n    }\n  }\n  return arr\n}\n\nconst valueToString = function (value, { blank = '', glue = ', ' } = { blank: '', glue: ', ' }) {\n  switch (typeof value) {\n    case 'string': return value\n    case 'object':\n      if (value === null) { return blank }\n      return [...(typeof value[Symbol.iterator] === 'function' ? value : Object.values(value))].join(glue)\n    case 'undefined': return blank\n    default: return String(value)\n  }\n}\n\nexport { clone, cloneEnumerable, getNestedValue, logError, namedLogError, valueToArray, valueToString }\n","// negative and positive lookbehinds are not supported in Edge, Firefox, or Safari as of Oct 2019\n// https://caniuse.com/#feat=js-regexp-lookbehind\n\nconst REGULAR_EXPRESSIONS = {\n  // matches common articles and determiners\n  articlesAndDeterminers: /\\b(?:a|an|and|are|is|of|the|to)\\b/g,\n\n  // matches multiple spaces\n  multiSpace: /\\ \\ +/g,\n\n  // matches multiple whitespace characters\n  multiWhitespace: /\\s\\s+/g,\n\n  // matches common punctuation except for decimal/thousands separators and number signs (+/-)\n  punctuation: /(?:(\\.|\\,)(?!\\d)|(?:[^\\d](\\+|\\-)[^\\d])|([\\(\\)\\[\\]\\{\\}\\?\\:\\;\\\"\\'\\_\\=]))/g, // has capture group\n  // punctuationLookbehind: /[\\.\\,](?!\\d)|(?<!\\d)[\\+\\-](?!\\d)|[\\(\\)\\[\\]\\{\\}\\?\\:\\;\\\"\\'\\_\\=]/g,\n\n  // matches single letters/digits surrounded by whitespace or at the beginning/end of strings/lines\n  singleCharacters: /(?:^|\\s)([a-z0-9])(?=$|\\s)/gm, // has capture group\n  // singleCharactersLookbehind: /(?:(?<=^|\\s).(?=$|\\s))/gm,\n  \n  // matches single characters at word boundries\n  singleCharactersWordBoundries: /\\b[a-z0-9]\\b/g,\n  \n  //  matches all whitespace characters except spaces (newlines, tabs, vertical tabs)\n  tabsAndVerticalWhitespace: /[\\t\\v]/g,\n  \n  // matches all whitespace characters \n  // newlines, spaces, tabs, vertical tabs\n  whitespace: /\\s/g,\n}\n\nexport default REGULAR_EXPRESSIONS","import REGULAR_EXPRESSIONS from './regular-expressions'\n\n// dictionary property symbols\nexport const LENGTH = Symbol('catalogger_length')\nexport const OCCURENCES = Symbol('catalogger_occurences')\nexport const RELEVANCE = Symbol('catalogger_relevance')\nexport const WEIGHT = Symbol('catalogger_weight')\n\n// private method symbols\nexport const BUILD_INDEX = Symbol('catalogger_buildIndex')\nexport const GET_RESULTS = Symbol('catalogger_getResults')\nexport const INVALIDATE_RESULTS = Symbol('catalogger_invalidateResults')\nexport const INVALIDATE_SORTING = Symbol('catalogger_invalidateSorting')\nexport const NORMALIZE_STRING = Symbol('catalogger_normalizeString')\nexport const UPDATE_RESULTS = Symbol('catalogger_updateResults')\n\n// private property symbols\nexport const CACHE = Symbol('catalogger_cache')\nexport const CONFIG = Symbol('catalogger_config')\nexport const DATA = Symbol('catalogger_data')\nexport const INDEX = Symbol('catalogger_index')\nexport const RESULTS = Symbol('catalogger_results')\nexport const QUERY = Symbol('catalogger_query')\n\nexport const DEFAULT_CONFIG = {\n  relevance: { inject: false, field: RELEVANCE, threshold: -1 },\n  results: { limit: -1 },\n  sort: { byRelevance: true, enabled: true, fields: null },\n  string: {\n    replacements: [\n      { exp: REGULAR_EXPRESSIONS.singleCharacters, val: '' },\n      { exp: REGULAR_EXPRESSIONS.punctuation, val: ' ', grouped: true },\n      { exp: REGULAR_EXPRESSIONS.articlesAndDeterminers, val: ' ' },\n      { exp: REGULAR_EXPRESSIONS.tabsAndVerticalWhitespace, val: ' ' },\n      { exp: REGULAR_EXPRESSIONS.multiSpace, val: ' ' }\n    ]\n  }\n}\n\nexport { REGULAR_EXPRESSIONS }\n","const levenshtein = require('js-levenshtein')\nimport { cloneEnumerable, getNestedValue, valueToArray, valueToString } from './utilities'\nimport {\n  REGULAR_EXPRESSIONS, DEFAULT_CONFIG,\n  LENGTH, OCCURENCES, RELEVANCE, WEIGHT,\n  BUILD_INDEX, GET_RESULTS, INVALIDATE_RESULTS, INVALIDATE_SORTING, NORMALIZE_STRING, UPDATE_RESULTS,\n  CACHE, CONFIG, DATA, INDEX, RESULTS, QUERY\n} from './constants'\n\nclass Catalogger {\n\n  constructor (documents, fields, options) {\n    this[CACHE] = { stringNormalizations: new Map() }\n    this[CONFIG] = { relevance: {}, results: {}, sort: {} }\n    this[DATA] = { documents: [], fields: [], type: 'Array' }\n    this[INDEX] = { dictionary: Object.create(null), valid: true }\n    this[RESULTS] = { items: new Map(), sorted: true, valid: true }\n    this[QUERY] = { processed: '', raw: '', tokens: [] }\n\n    this.config = options\n    this.documents = documents\n    this.fields = fields\n  }\n\n  // ACCESSORS AND MUTATORS\n\n  get config () { return cloneEnumerable(this[CONFIG]) }\n  set config ({ relevance={}, results={}, sort={}, string={} } = { relevance:{}, results:{}, sort:{}, string:{} }) {\n    const config = {\n      relevance: { ...DEFAULT_CONFIG.relevance, ...this[CONFIG].relevance, ...relevance },\n      results: { ...DEFAULT_CONFIG.results, ...this[CONFIG].results, ...results },\n      sort: { ...DEFAULT_CONFIG.sort, ...this[CONFIG].sort, ...sort },\n      string: { ...DEFAULT_CONFIG.string, ...this[CONFIG].string, ...string },\n    }\n    config.sort.fields = valueToArray(config.sort.fields, { removeEmpty: true, trimStrings: true })\n    this[CONFIG] = config\n    this.reIndex()\n  }\n\n  get documents () { return this[DATA].documents }\n  set documents (documents) {\n    if (documents !== this[DATA].documents) {\n      if (typeof documents === 'undefined' || documents === 'null') {\n        this[DATA].documents = []\n      } else {\n        this[DATA].documents = documents\n      }\n      if (Array.isArray(this[DATA].documents)) {\n        this[DATA].type = 'Array'\n      } else {\n        this[DATA].type = 'Object'\n      }\n      this.reIndex()\n    }\n  }\n\n  get fields () { return cloneEnumerable(this[DATA].fields) }\n  set fields (rawFields) {\n    const fields = valueToArray(rawFields, { removeEmpty: true, trimStrings: true })\n    // no fields supplied so we use the fields from the first document\n    if (fields.length === 0 && typeof this[DATA].documents === 'object') {\n      const documents = Object.keys(this[DATA].documents)\n      if (typeof this[DATA].documents[documents[0]] === 'object') {\n        const documentFields = Object.keys(this[DATA].documents[documents[0]])\n        for (const field of documentFields) {\n          if (typeof this[DATA].documents[documents[0]][field] !== 'object') {\n            fields.push(field)\n          }\n        }\n      }\n    }\n    // check if fields have changed\n    if (fields.length === this[DATA].fields.length) {\n      let same = true\n      for (let i = 0; i < fields.length; i++) {\n        if (fields[i] !== this[DATA].fields[i]) {\n          same = false\n          break;\n        }\n      }\n      if (same) {\n        return undefined\n      }\n    }\n    this[DATA].fields = fields\n    this.reIndex()\n  }\n\n  get query () { return this[QUERY].raw }\n  set query (rawQuery) {\n    if (typeof rawQuery === 'string') {\n      if (rawQuery !== this[QUERY].raw) {\n        this[QUERY].raw = rawQuery\n        const processed = this[NORMALIZE_STRING](rawQuery)\n        if (processed !== this[QUERY].processed) {\n          this[QUERY].processed = processed\n          this[QUERY].tokens = [...new Set(processed.split(' '))] // remove duplicates\n          this[INVALIDATE_RESULTS]()\n        }\n      }\n    } else { // invalid rawQuery provided\n      this[QUERY].processed = ''\n      this[QUERY].raw = ''\n      this[QUERY].tokens = []\n    }\n  }\n\n  get indexed () { return this[INDEX].valid }\n  get evaluated () { return this[RESULTS].valid }\n  get sorted () { return this[RESULTS].sorted }\n\n  // PUBLIC METHODS\n\n  /**\n   * Manually reindex the catalog and returns itself for chaining with other methods\n   * @return { Catalog }\n   */\n  reIndex () {\n    this[INDEX].valid = false\n    this[INVALIDATE_RESULTS]()\n    this[BUILD_INDEX]()\n    return this\n  }\n\n  /**\n   * Updates, caches, then returns the results based on the query\n   * @return { [Any] }\n   */\n  resultsFor (query) {\n    this.query = query\n    return this[GET_RESULTS]()\n  }\n\n  /**\n   * Iterator method for processing results in a for..of loop\n   * @return { @@iterator }\n   */\n  *[Symbol.iterator] () {\n    yield* this.result()\n  }\n\n  /**\n   * Generator method for iterating through the current results\n   * @return { Any }\n   */\n  *result () {\n    const results = this[GET_RESULTS]()\n    for (const result of results) {\n      yield result\n    }\n  }\n\n  // Private Methods\n\n  [BUILD_INDEX] () {\n    if (!this[INDEX].valid) {\n      if (this[DATA].documents !== null && typeof this[DATA].documents === 'object' && Array.isArray(this[DATA].fields)) {\n        const keys = Object.keys(this[DATA].documents)\n        this[INDEX].dictionary = Object.create(null)\n        const dict = this[INDEX].dictionary\n\n        for (const key of keys) {\n\n          for (const field of this[DATA].fields) {\n            const rawText = valueToString(\n              field.includes('.') ? getNestedValue(this[DATA].documents[key], field, { keySeparator: '.' }) : this[DATA].documents[key][field],\n              { glue: ' '}\n            ).toLowerCase().trim()\n            \n            if (rawText !== '') {\n              const normalizedText = this[NORMALIZE_STRING](rawText)\n              const tokens = normalizedText.split(' ')\n              let tokenIndex = 0\n\n              for (const token of tokens) {\n                if (typeof dict[token] === 'undefined') {\n                  dict[token] = Object.create(null)\n                  dict[token][LENGTH] = token.length\n                  dict[token][OCCURENCES] = 0\n                }\n\n                if (typeof dict[token][key] === 'undefined') {\n                  dict[token][key] = Object.create(null)\n                  dict[token][key][OCCURENCES] = 0\n                }\n\n                if (typeof dict[token][key][field] === 'undefined') {\n                  dict[token][key][field] = Object.create(null)\n                  dict[token][key][field].fieldLength = rawText.length\n                  dict[token][key][field].foundAt = []\n                  dict[token][key][field][OCCURENCES] = 0\n                }\n\n                dict[token][OCCURENCES]++\n                dict[token][key][OCCURENCES]++\n                dict[token][key][field][OCCURENCES]++\n\n                dict[token][key][field].foundAt.push(tokenIndex)\n\n                tokenIndex++\n              } // end loop over field tokens\n            } // end if field is empty\n          } // end loop over searchable fields\n        \n        } // end loop over document keys\n        \n        // calculate dictionary entry weights\n        for (const token of Object.keys(dict)) {\n          dict[token][WEIGHT] = 1 / (Math.log(dict[token][OCCURENCES]) + 1)\n          for (const key of Object.keys(dict[token])) {\n            let docWeight = 0\n            for (const field of Object.keys(dict[token][key])) {\n              docWeight += 1 / (Math.log(dict[token][key][field].fieldLength) + 1)\n            }\n            dict[token][key][WEIGHT] = docWeight / dict[token][key][OCCURENCES]\n          }\n        }\n\n      } // end if documents usable\n\n      this[INDEX].valid = true\n    }\n    return this\n  }\n\n  [GET_RESULTS] () {\n    this[UPDATE_RESULTS]()\n\n    const docs = this[DATA].documents\n    const items = this[RESULTS].items\n    const threshold = this[QUERY].processed === '' ? -1 : this[CONFIG].relevance.threshold\n\n    let limit = this[CONFIG].results.limit\n    const resultDocuments = new Map()\n\n    // choosing to duplicate code so there are fewer comparisons inside the loop\n    if (limit === -1) { // unlimited\n      if (threshold === -1) { // all results\n        for (const key of items.keys()) {\n          resultDocuments.set(key, docs[key])\n        }\n      } else { // results that exceed threshold\n        if (this[CONFIG].sort.enabled) { // items are sorted so we can stop when the threshold is reached\n          for (const item of items.entries()) {\n            if (item[1] >= threshold) {\n              resultDocuments.set(item[0], docs[item[0]])\n            } else {\n              break\n            }\n          }\n        } else { // items are unsorted so we have to loop through all of them\n          for (const item of items.entries()) {\n            if (item[1] >= threshold) {\n              resultDocuments.set(item[0], docs[item[0]])\n            }\n          }\n        }\n      }\n    } else { // limited\n      if (threshold === -1) { // all results\n        for (const key of items.keys()) {\n          if (limit > 0) {\n            resultDocuments.set(key ,docs[key])\n            limit--\n          } else {\n            break\n          }\n        }\n      } else { // results that exceed threshold\n        if (this[CONFIG].sort.enabled) { // items are sorted so we can stop when the limit or threshold is reached\n          for (const item of items.entries()) {\n            if (item[1] >= threshold && limit > 0) {\n              resultDocuments.set(item[0], docs[item[0]])\n              limit--\n            } else {\n              break\n            }\n          }\n        } else { // items are unsorted so we have to loop through them until the limit is reached\n          for (const item of items.entries()) {\n            if (item[1] >= threshold && limit > 0) {\n              resultDocuments.set(item[0], docs[item[0]])\n              limit--\n            } else if (limit < 1) {\n              break\n            }\n          }\n        }\n      }\n    }\n\n    if (this[DATA].type === 'Array') {\n      return Array.from(resultDocuments.values())\n    } else {\n      const output = Object.create(null)\n      for (const doc of resultDocuments.entries()) {\n        output[doc[0]] = doc[1]\n      }\n      return output\n    }\n  }\n\n  [INVALIDATE_RESULTS] () {\n    this[RESULTS].items.clear()\n    this[INVALIDATE_SORTING]()\n    this[RESULTS].valid = false\n    return this\n  }\n\n  [INVALIDATE_SORTING] () {\n    this[RESULTS].sorted = false\n    return this\n  }\n\n  [NORMALIZE_STRING] (input) {\n    let normalizedString = ''\n    const str = input.toLowerCase().trim()\n\n    if (this[CACHE].stringNormalizations.has(str)) {\n      normalizedString = this[CACHE].stringNormalizations.get(str)\n    } else {\n      normalizedString = str\n      \n      for (const replacement of this[CONFIG].string.replacements) {\n        if (replacement.grouped) {\n          let match = []\n          while ((match = replacement.exp.exec(normalizedString)) !== null) {\n            if (match.length === 1 || typeof match[1] === 'undefined') {\n              normalizedString = normalizedString.substring(0, match.index) + replacement.val + normalizedString.substring(match.index + match[0].length)\n            } else {\n              let start = normalizedString.substring(0, match.index)\n              let middle = normalizedString.substring(match.index, match.index + match[0].length)\n              let end = normalizedString.substring(match.index + match[0].length)\n\n              for (let i = 1; i < match.length; i++) {\n                if (typeof match[i] !== 'undefined') {\n                  middle = middle.replace(match[i], replacement.val)\n                }\n              }\n              normalizedString = start + middle + end\n            }\n          }\n        } else {\n          normalizedString = normalizedString.replace(replacement.exp, replacement.val)\n        }\n      }\n      // remove any leading or trailing spaces left from the replacements\n      normalizedString = normalizedString.trim()\n\n      // store the result in the cache\n      this[CACHE].stringNormalizations.set(str, normalizedString)\n    }\n    return normalizedString\n  }\n\n  [UPDATE_RESULTS] () {\n    if (!this[INDEX].valid) {\n      this[BUILD_INDEX]()\n    }\n\n    if (!this[RESULTS].valid) {\n      this[INVALIDATE_SORTING]()\n      this[RESULTS].items = new Map(Object.keys(this[DATA].documents).map(k => [k, 0]))\n      const results = this[RESULTS].items\n      const dict = this[INDEX].dictionary\n      const dictTokens = Object.keys(dict)\n\n      for (const queryToken of this[QUERY].tokens) {\n        if (typeof dict[queryToken] !== 'undefined') {\n          for (const key of Object.keys(dict[queryToken])) {\n            let relevance = results.get(key)\n            relevance += dict[queryToken][WEIGHT] * dict[queryToken][key][WEIGHT]\n            results.set(key, relevance)\n          }\n        }\n        \n        for (const dictToken of dictTokens) {\n          let matchValue = 0\n\n          if ((queryToken.length > dictToken.length) ? queryToken.includes(dictToken) : dictToken.includes(queryToken)) {\n            matchValue = Math.min(queryToken.length, dictToken.length) * 0.1\n          } else {\n            const distance = levenshtein(queryToken, dictToken)\n            if (distance < 6) {\n              matchValue = (5 - distance) * 0.01\n            }\n          }\n\n          if (matchValue > 0) {\n            for (const key of Object.keys(dict[dictToken])) {\n              let relevance = results.get(key)\n              relevance += dict[dictToken][WEIGHT] * dict[dictToken][key][WEIGHT] * matchValue\n              results.set(key, relevance)\n            }\n          }\n        }\n      }\n\n      if (this[CONFIG].relevance.inject) {\n        const rel = this[QUERY].processed === '' ? 0 : result[1]\n        for (const result of results.entries()) {\n          this[DATA].documents[result[0]][this[CONFIG].relevance.field] = rel\n        }\n      }\n\n      this[RESULTS].valid = true\n    }\n\n    if (!this[RESULTS].sorted) {\n      if (this[CONFIG].sort.enabled) {\n        let results = Array.from(this[RESULTS].items.entries())\n\n        if (Array.isArray(this[CONFIG].sort.fields) && this[CONFIG].sort.fields.length) {\n          const collator = new Intl.Collator(\n            undefined,\n            {\n              caseFirst: 'false',\n              ignorePunctuation: false,\n              localeMatcher: 'best fit',\n              numeric: true,\n              sensitivity: 'base',\n              usage: 'sort'\n            }\n          )\n\n          results.sort((a, b) => {\n            const docA = this[DATA].documents[a[0]]\n            const docB = this[DATA].documents[b[0]]\n            let comparison = 0\n            for (const field of this[CONFIG].sort.fields) {\n              if (typeof field === 'string') {\n                comparison = collator.compare(docA[field], docB[field])\n              } else {\n                if (field.direction.substring(0, 4).toUpperCase() === 'DESC') {\n                  comparison = collator.compare(docB[field.key], docA[field.key])\n                } else {\n                  comparison = collator.compare(docA[field.key], docB[field.key])\n                }\n              }\n              if (comparison) {\n                return comparison\n              }\n            }\n            return comparison\n          })\n        }\n\n        if (this[CONFIG].sort.byRelevance) {\n          results.sort((a, b) => b[1] - a[1])\n        }\n\n        this[RESULTS].items = new Map(results)\n      }\n\n      this[RESULTS].sorted = true\n    }\n    return this\n  }\n}\n\n/**\n * Factory function to instantiate and configure a Catalog object\n * \n * @param  { [Object] }         documents\n * @param  { Object }           options.relevance\n * @param  { Boolean }          options.relevance.inject    [ false ]\n * @param  { String }           options.relevance.field     [ Symbol('catalogger_relevance') ]\n * @param  { Number }           options.relevance.threshold [ -1 ]\n * @param  { Number }           options.results.limit       [ -1 ]\n * @param  { Boolean }          options.sort.byRelevance    [ true ]\n * @param  { Boolean }          options.sort.enabled        [ true ]\n * @param  { [String/Object] }  options.sort.fields         [ null ]\n * @param  { [Object] }         options.string.replacements [ [{}] ]\n * @param  { String/[String] }  using                       [ [] ]\n * \n * @return { Catalog }\n */\nconst catalog = function (\n  documents,\n  {\n    relevance = {}, results = {}, sort = {}, string = {}, using = []\n  } = {\n    relevance: {}, results: {}, sort: {}, string: {}, using: []\n  }\n) {\n  return new Catalogger(documents, using, { relevance, results, sort, string })\n}\n\nconst replacements = DEFAULT_CONFIG.string.replacements\n\nexport {\n  catalog as default,\n  DEFAULT_CONFIG as config,\n  REGULAR_EXPRESSIONS as expressions,\n  RELEVANCE,\n  replacements\n}\n"]}